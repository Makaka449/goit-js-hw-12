{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function fetchImages(searchWord, currPage) {\n  const KEY = '43280076-efaf032a147c4a401dc5ab87e';\n  const URL = 'https://pixabay.com/api/';\n  const resp = await axios.get(URL, {\n    params: {\n      key: KEY,\n      q: searchWord,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: currPage,\n      per_page: 15,\n    },\n  });\n  return resp.data;\n\n}","import { fetchImages } from './js/pixabay-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  nav: true,\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 150,\n});\n\nconst form = document.querySelector('.search-form');\nconst container = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-btn');\nlet searchWord = '';\nlet currPage;\n\nform.addEventListener('submit', onSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  currPage = 1;\n  container.innerHTML = '';\n  searchWord = form.elements.searchWord.value.trim();\n  loadMoreBtn.style.display = 'block';\n\n  if (searchWord === '') {\n    iziToast.error({ message: 'Please enter a search keyword' });\n    return;\n  }\n\n  loader.style.display = 'block';\n\n  try {\n    const images = await fetchImages(searchWord, currPage);\n    const marcup = renderMarcup(images);\n    if (images.hits.length === 0) {\n      iziToast.warning({ message: 'No images found for your search query' });\n      loadMoreBtn.style.display = 'none';\n    } else {\n      container.insertAdjacentHTML('beforeend', marcup);\n      lightbox.refresh();\n    }\n  } catch (error) {\n    console.error('Error:', error);\n    iziToast.error({ message: 'An error occurred while fetching images' });\n  } finally {\n    loader.style.display = 'none';\n  }\n\n  form.reset();\n}\n\nasync function onLoadMore() {\n  currPage += 1;\n  loader.style.display = 'block';\n\n  try {\n    const images = await fetchImages(searchWord, currPage);\n    const marcup = renderMarcup(images);\n    container.insertAdjacentHTML('beforeend', marcup);\n    lightbox.refresh();\n\n    const cardHeight = container.getBoundingClientRect().height;\n    window.scrollBy({\n      top: 2 * cardHeight,\n      behavior: 'smooth',\n    });\n\n    if (images.hits.length <= 14) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({ message: 'End of the list' });\n      lightbox.refresh();\n    }\n  } catch (error) {\n    console.error('Error:', error);\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n"],"names":["fetchImages","searchWord","currPage","KEY","URL","axios","lightbox","SimpleLightbox","form","container","loader","loadMoreBtn","onSubmit","onLoadMore","event","iziToast","images","marcup","error","cardHeight"],"mappings":"owBAEO,eAAeA,EAAYC,EAAYC,EAAU,CACtD,MAAMC,EAAM,qCACNC,EAAM,2BAYZ,OAXa,MAAMC,EAAM,IAAID,EAAK,CAChC,OAAQ,CACN,IAAKD,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACX,CACL,CAAG,GACW,IAEd,CCZA,MAAMI,EAAW,IAAIC,EAAe,aAAc,CAChD,IAAK,GACL,SAAU,GACV,aAAc,MACd,aAAc,GAChB,CAAC,EAEKC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,WAAW,EACtD,IAAIV,EAAa,GACbC,EAEJM,EAAK,iBAAiB,SAAUI,CAAQ,EACxCD,EAAY,iBAAiB,QAASE,CAAU,EAEhD,eAAeD,EAASE,EAAO,CAO7B,GANAA,EAAM,eAAc,EACpBZ,EAAW,EACXO,EAAU,UAAY,GACtBR,EAAaO,EAAK,SAAS,WAAW,MAAM,KAAI,EAChDG,EAAY,MAAM,QAAU,QAExBV,IAAe,GAAI,CACrBc,EAAS,MAAM,CAAE,QAAS,+BAAiC,CAAA,EAC3D,MACD,CAEDL,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMM,EAAS,MAAMhB,EAAYC,EAAYC,CAAQ,EAC/Ce,EAAS,aAAaD,CAAM,EAC9BA,EAAO,KAAK,SAAW,GACzBD,EAAS,QAAQ,CAAE,QAAS,uCAAyC,CAAA,EACrEJ,EAAY,MAAM,QAAU,SAE5BF,EAAU,mBAAmB,YAAaQ,CAAM,EAChDX,EAAS,QAAO,EAEnB,OAAQY,EAAO,CACd,QAAQ,MAAM,SAAUA,CAAK,EAC7BH,EAAS,MAAM,CAAE,QAAS,yCAA2C,CAAA,CACzE,QAAY,CACRL,EAAO,MAAM,QAAU,MACxB,CAEDF,EAAK,MAAK,CACZ,CAEA,eAAeK,GAAa,CAC1BX,GAAY,EACZQ,EAAO,MAAM,QAAU,QAEvB,GAAI,CACF,MAAMM,EAAS,MAAMhB,EAAYC,EAAYC,CAAQ,EAC/Ce,EAAS,aAAaD,CAAM,EAClCP,EAAU,mBAAmB,YAAaQ,CAAM,EAChDX,EAAS,QAAO,EAEhB,MAAMa,EAAaV,EAAU,sBAAqB,EAAG,OACrD,OAAO,SAAS,CACd,IAAK,EAAIU,EACT,SAAU,QAChB,CAAK,EAEGH,EAAO,KAAK,QAAU,KACxBL,EAAY,MAAM,QAAU,OAC5BI,EAAS,KAAK,CAAE,QAAS,iBAAmB,CAAA,EAC5CT,EAAS,QAAO,EAEnB,OAAQY,EAAO,CACd,QAAQ,MAAM,SAAUA,CAAK,CACjC,QAAY,CACRR,EAAO,MAAM,QAAU,MACxB,CACH"}